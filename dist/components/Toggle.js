import Component from"./Component.js";import{onEvent,offEvent,dispatchEvent}from"../utils/element.js";const clickHandler=Symbol(),keyDownHandler=Symbol();export default class Toggle extends Component{constructor(){super(),this[clickHandler]=()=>{this.toggle()},this[keyDownHandler]=({code:n})=>{["Space","Enter"].includes(n)&&this.toggle()},this.registerAttributes({value:!1}),this.tabIndex=0}connectedCallback(){super.connectedCallback(),onEvent(this,"click",this[clickHandler]),onEvent(this,"keydown",this[keyDownHandler])}disconnectedCallback(){super.disconnectedCallback(),offEvent(this,"click",this[clickHandler]),offEvent(this,"keydown",this[keyDownHandler])}attributeChangedCallback(n,e,t){"value"===n&&dispatchEvent(this,"change",{value:t})}on(){return this.value=!0,dispatchEvent(this,"on",{value:!0}),this}off(){return this.value=!1,dispatchEvent(this,"on",{value:!1}),this}toggle(){return this.value?this.off():this.on(),dispatchEvent(this,"toggle",{value:this.value}),this}get shadowTemplate(){return`\n      <div id="switch">\n        <div id="handle"></div>\n      </div>\n      <label id="label">\n        ${super.shadowTemplate}\n      </label>\n    `}get shadowStyles(){return`\n      ${super.shadowStyles}\n      :host {\n        --switch_height: 2rem;\n        --switch_width: 3rem;\n        --switch_border: 1px solid var(--c_border);\n        --switch_background__off: var(--c_bg__alt);\n        --switch_background__on: var(--c_success);\n        --handle_size__off: 1rem;\n        --handle_size__on: 1.5rem;\n        --handle_border: 1px solid var(--c_border);\n        --handle_background__off: var(--c_border);\n        --handle_background__on: white;\n\n        display: flex;\n        align-items: center;\n        cursor: pointer;\n        margin-bottom: var(--spacer);\n        border-radius: 999rem;\n      }\n      #switch {\n        display: flex;\n        align-items: center;\n        width: var(--switch_width);\n        height: var(--switch_height);\n        border: var(--switch_border);\n        background: var(--switch_background__off);\n        border-radius: 999rem;\n        margin-right: var(--spacer);\n      }\n      #handle {\n        --margin: calc( (var(--switch_height) - var(--handle_size__off)) / 2);\n        width: var(--handle_size__off);\n        height: var(--handle_size__off);\n        border: var(--handle_border);\n        background: var(--handle_background__off);\n        border-radius: 999rem;\n        transform: translateX(var(--margin));\n        transition: width var(--animation_ms, 256ms), height var(--animation_ms, 256ms), transform var(--animation_ms, 256ms);\n      }\n      :host([value="true"]) #switch {\n        background: var(--switch_background__on);\n      }\n      :host([value="true"]) #handle {\n        --m: calc( (var(--switch_height) - var(--handle_size__on)) / 2);\n        --d: calc( var(--switch_width) - var(--handle_size__on) - var(--m));\n        width: var(--handle_size__on);\n        height: var(--handle_size__on);\n        background: var(--handle_background__on);\n        transform: translateX(var(--d));\n      }\n      #label {\n        display: block;\n        flex: 1 1 auto;\n        padding: 0;\n      }\n    `}static observedAttributes=[...Component.observedAttributes,"value"]}window.customElements.define("k-toggle",Toggle);