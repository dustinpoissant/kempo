import Component from"../Component.js";import{offEvent,onEvent}from"../../utils/element.js";const table=Symbol("table"),record=Symbol("record"),editRecord=Symbol("editRecord"),saveRecord=Symbol("saveRecord"),cancelEdit=Symbol("cancelEdit");export default class Edit extends Component{constructor(t,e){super(),this[table]=t,this[record]=e,this[editRecord]=this.editRecord.bind(this),this[saveRecord]=this.saveRecord.bind(this),this[cancelEdit]=this.cancelEdit.bind(this),this.registerAttributes({editing:this[table].recordIsEditing(record)}),this.classList.add("mxq")}async render(t=!1){return!!await super.render(t)&&(onEvent(this.shadowRoot.getElementById("editButton"),"click",this[editRecord]),onEvent(this.shadowRoot.getElementById("saveButton"),"click",this[saveRecord]),onEvent(this.shadowRoot.getElementById("cancelButton"),"click",this[cancelEdit]),!0)}disconnectedCallback(){super.disconnectedCallback(),offEvent(this.shadowRoot.getElementById("editButton"),"click",this[editRecord]),offEvent(this.shadowRoot.getElementById("saveButton"),"click",this[saveRecord]),offEvent(this.shadowRoot.getElementById("cancelButton"),"click",this[cancelEdit])}editRecord(){this[table].editRecord(this[record])}saveRecord(){this[table].saveEditedRecord(this[record])}cancelEdit(){this[table].cancelEditedRecord(this[record])}get shadowTemplate(){return'\n      <button id="editButton" class="pq no-btn">\n        <k-icon name="edit"></k-icon>\n      </button>\n      <button id="cancelButton" class="pq no-btn bg-danger">\n        <k-icon name="close"></k-icon>\n      </button>\n      <button id="saveButton" class="pq no-btn bg-success">\n        <k-icon name="checkmark"></k-icon>\n      </button>\n    '}get shadowStyles(){return"\n      :host {\n        display: inline-flex;\n        width: max-content;\n        align-items: baseline;\n      }\n      button {\n        display: flex;\n        align-items: center;\n      }\n      :host([editing]) #editButton,\n      :host(:not([editing])) #cancelButton,\n      :host(:not([editing])) #saveButton {\n        display: none;\n      }\n    "}}window.customElements.define("k-table-edit",Edit);