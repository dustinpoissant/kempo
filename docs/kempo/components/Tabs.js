import Component from"./Component.js";import{dispatchEvent}from"../utils/element.js";const clickHandler=Symbol();export class Tab extends Component{constructor(){super(),this[clickHandler]=()=>{this.active||(this.tabs.active=this.for)},this.slot="tabs",this.registerAttribute("active",!1)}connectedCallback(){super.connectedCallback(),this.shadowRoot.getElementById("button").addEventListener("click",this[clickHandler])}get for(){const t=this.getAttribute("for");return t||this?.tabs.tabs.indexOf(this)}set for(t){t?this.setAttribute("for",t):this.removeAttribute("for")}get tabs(){return"K-TABS"===this.parentElement.tagName?this.parentElement:null}get shadowTemplate(){return`\n      <button id="button">\n        ${super.shadowTemplate}\n      </button>\n    `}get shadowStyles(){return"\n      :host {\n        margin-bottom: -1px;\n      }\n      #button {\n        padding: var(--spacer_h);\n        background-color: transparent;\n        border: none;\n        cursor: inherit;\n        box-shadow: none;\n        color: inherit;\n      }\n      :host(:not([active])) #button {\n        cursor: pointer;\n      }\n      :host([active]){\n        border-bottom: 2px solid var(--c_primary);\n        margin-bottom: -1px;\n      }\n      :host([active]) #button {\n        color: var(--tc_primary);\n      }\n    "}}window.customElements.define("k-tab",Tab);export class TabContent extends Component{constructor(){super(),this.registerAttribute("active",!1)}get tabs(){return"K-TABS"===this.parentElement.tagName?this.parentElement:null}get name(){const t=this.getAttribute("name");return t||this?.tabs.contents.indexOf(this)}set name(t){t?this.setAttribute("name",t):this.removeAttribute("name")}get shadowStyles(){return`\n      ${super.shadowStyles}\n      :host {\n        display: block;\n        height: 100%;\n        max-height: 100%;\n        flex: 1 1 auto;\n        overflow: hidden;\n      }\n      :host([active]) {\n        display: block;\n      }\n      :host(:not([active])) {\n        display: none;\n      }\n    `}}window.customElements.define("k-tab-content",TabContent);export class Tabs extends Component{constructor(){super(),this.registerAttribute("active","")}async connectedCallback(){await super.connectedCallback(),this.active||(this.active=`${this.querySelectorAll("k-tab-content")[0].name}`)}attributeChangedCallback(t,e,n){if("active"===t){const t=this.getActiveTab();t&&(t.active=!1);const e=this.getActiveContent();e&&(e.active=!1);const s=this.getTab(n);s&&(s.active=!0);const o=this.getContent(n);o&&(o.active=!0),dispatchEvent(this,"tab",{tab:n})}}get contents(){return[...this.querySelectorAll(":scope > k-tab-content")]}get tabs(){return[...this.querySelectorAll(":scope > k-tab")]}getTab(t){let e;if("string"==typeof t&&(e=this.querySelector(`k-tab[for="${t}"]`)),!e){let n=parseInt(t);n||(n=0),e=this.querySelectorAll("k-tab")[n]}return e}getActiveTab(){return this.querySelector(':scope > k-tab[active="true"]')}getContent(t){let e;if("string"==typeof t&&(e=this.querySelector(`k-tab-content[name="${t}"]`)),!e){let n=parseInt(t);n||(n=0),e=this.querySelectorAll("k-tab-content")[n]}return e}getActiveContent(){return this.querySelector(':scope > k-tab-content[active="true"]')}get shadowTemplate(){return`\n      <div id="wrapper">\n        <div id="tabs">\n          <slot name="tabs"></slot>\n        </div>\n        <div id="contents">\n          ${super.shadowTemplate}\n        </div>\n      </div>\n      \n    `}get shadowStyles(){return`\n      ${super.shadowStyles}\n      :host {\n        display: block;\n        overflow: hidden;\n      }\n      #wrapper {\n        display: flex;\n        flex-direction: column;\n        max-height: 100%;\n        height: 100%;\n        overflow: hidden;\n      }\n      #tabs {\n        display: flex;\n        border-bottom: 1px solid var(--c_border);\n        padding: 0;\n        margin-top: calc(0 - var(--spacer));\n        align-items: flex-start;\n      }\n      #contents {\n        display: flex;\n        flex-direction: column;\n        flex: 1;\n        max-height: 100%;\n        overflow: hidden\n      }\n    `}static observedAttributes=[...super.observedAttributes,"active"]}window.customElements.define("k-tabs",Tabs);export class TabSpacer extends Component{constructor(){super(),this.slot="tabs"}get shadowStyles(){return`\n      ${super.shadowStyles}\n      :host {\n        flex: 1 1 auto;\n        height: 1px;\n      }\n    `}}window.customElements.define("k-tab-spacer",TabSpacer);